{"file_contents":{"studyit-app/src/app/tutor/page.tsx":{"content":"\"use client\";\n/**\n * AI Tutor (placeholder).\n *\n * Behavior\n * - Simple local chat transcript (no backend).\n * - Each user message gets a canned assistant reply.\n *\n * Future\n * - Replace `send()` with a call to an API route or model provider.\n */\n\nimport { useState } from \"react\";\n\ntype Msg = { role: \"user\" | \"assistant\"; text: string };\n\nexport default function Tutor() {\n  const [msgs, setMsgs] = useState<Msg[]>([\n    { role: \"assistant\", text: \"Hi! Ask me any study question.\" },\n  ]);\n  const [input, setInput] = useState(\"\");\n\n  /** Append user message and a placeholder assistant response. */\n  function send() {\n    const text = input.trim();\n    if (!text) return;\n\n    // Create user message\n    const userMsg: Msg = { role: \"user\", text };\n\n    // Stubbed response for demo; swap with real API later\n    const aiMsg: Msg = {\n      role: \"assistant\",\n      text: \"Thanks! Here’s a step-by-step approach. (Replace this with real model output.)\",\n    };\n\n    // Append both to the transcript\n    setMsgs((m) => [...m, userMsg, aiMsg]);\n    setInput(\"\");\n  }\n\n  return (\n    <section className=\"space-y-4\">\n      <h1 className=\"text-2xl font-semibold\">AI Tutor</h1>\n\n      <div className=\"rounded-2xl bg-white p-4 shadow\">\n        <div className=\"space-y-2\">\n          {msgs.map((m, i) => (\n            <div key={i} className={m.role === \"user\" ? \"text-right\" : \"text-left\"}>\n              <span\n                className={`inline-block rounded-xl px-3 py-2 ${\n                  m.role === \"user\" ? \"bg-blue-600 text-white\" : \"bg-gray-100\"\n                }`}\n              >\n                {m.text}\n              </span>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"mt-3 flex gap-2\">\n          <input\n            className=\"w-full rounded border p-2\"\n            placeholder=\"Type a question...\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyDown={(e) => e.key === \"Enter\" && send()}\n          />\n          <button onClick={send} className=\"rounded bg-black px-4 py-2 text-white\">Send</button>\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":2138},"studyit-app/src/app/preferences/page.tsx":{"content":"\"use client\";\n/**\n * Preferences form.\n * Data\n * - localStorage key: \"studyit_prefs\"\n * - Shape: { subjects, goal, style, level }\n * Behavior\n * - On submit: persist to localStorage; future pages (Plan, Quiz) can read it.\n */\n\nimport { FormEvent, useEffect, useState } from \"react\";\n\ntype Pref = { subjects: string; goal: string; style: string; level: string };\nconst PREF_KEY = \"studyit_prefs\";\n\nexport default function Preferences() {\n  const [pref, setPref] = useState<Pref>({\n    subjects: \"\",\n    goal: \"\",\n    style: \"visual\",\n    level: \"medium\",\n  });\n\n  // Load existing prefs if present\n  useEffect(() => {\n    const raw = localStorage.getItem(PREF_KEY);\n    if (raw) setPref(JSON.parse(raw));\n  }, []);\n\n  function onSubmit(e: FormEvent) {\n    e.preventDefault();\n    localStorage.setItem(PREF_KEY, JSON.stringify(pref));\n    alert(\"Preferences saved.\");\n  }\n\n  return (\n    <section className=\"mx-auto max-w-2xl rounded-2xl bg-white p-6 shadow\">\n      <h1 className=\"text-xl font-semibold\">Subjects & Preferences</h1>\n\n      <form onSubmit={onSubmit} className=\"mt-4 space-y-3\">\n        {/* Comma-separated list to keep it simple */}\n        <input\n          className=\"w-full rounded border p-2\"\n          placeholder=\"Subjects (e.g., Math, CS, Stats)\"\n          value={pref.subjects}\n          onChange={(e) => setPref({ ...pref, subjects: e.target.value })}\n        />\n\n        <input\n          className=\"w-full rounded border p-2\"\n          placeholder=\"Goal (e.g., Exam on Nov 10, target A-)\"\n          value={pref.goal}\n          onChange={(e) => setPref({ ...pref, goal: e.target.value })}\n        />\n\n        <select\n          className=\"w-full rounded border p-2\"\n          value={pref.style}\n          onChange={(e) => setPref({ ...pref, style: e.target.value })}\n        >\n          <option value=\"visual\">Visual</option>\n          <option value=\"reading\">Reading/Writing</option>\n          <option value=\"auditory\">Auditory</option>\n          <option value=\"kinesthetic\">Kinesthetic</option>\n        </select>\n\n        <select\n          className=\"w-full rounded border p-2\"\n          value={pref.level}\n          onChange={(e) => setPref({ ...pref, level: e.target.value })}\n        >\n          <option value=\"easy\">Easy</option>\n          <option value=\"medium\">Medium</option>\n          <option value=\"hard\">Hard</option>\n        </select>\n\n        <button className=\"rounded bg-black px-4 py-2 text-white\">Save</button>\n      </form>\n    </section>\n  );\n}\n","size_bytes":2486},"studyit-app/src/app/globals.css":{"content":"@import \"tailwindcss\";\n\n:root {\n  --background: #ffffff;\n  --foreground: #171717;\n}\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --font-sans: var(--font-geist-sans);\n  --font-mono: var(--font-geist-mono);\n}\n\n@media (prefers-color-scheme: dark) {\n  :root {\n    --background: #0a0a0a;\n    --foreground: #ededed;\n  }\n}\n\nbody {\n  background: var(--background);\n  color: var(--foreground);\n  font-family: Arial, Helvetica, sans-serif;\n}\n","size_bytes":488},"studyit-app/src/app/settings/page.tsx":{"content":"\"use client\";\n/**\n * Settings page.\n *\n * Data\n * - localStorage key: `studyit_settings`.\n * - Shape: `{ notif: boolean, difficulty: \"easy\" | \"medium\" | \"hard\" }`.\n *\n * Behavior\n * - Save settings locally; allow logout via `AuthProvider`.\n */\n\nimport { useAuth } from \"@/components/AuthProvider\";\nimport { useEffect, useState } from \"react\";\n\nconst KEY = \"studyit_settings\";\n\nexport default function Settings() {\n  const { user, logout } = useAuth();\n  const [notif, setNotif] = useState(true);\n  const [difficulty, setDifficulty] = useState(\"medium\");\n\n  // Load saved settings (if any)\n  useEffect(() => {\n    const raw = localStorage.getItem(KEY);\n    if (raw) {\n      const s = JSON.parse(raw);\n      setNotif(!!s.notif);\n      setDifficulty(s.difficulty ?? \"medium\");\n    }\n  }, []);\n\n  /** Persist current settings to localStorage. */\n  function save() {\n    localStorage.setItem(KEY, JSON.stringify({ notif, difficulty }));\n    alert(\"Settings saved.\");\n  }\n\n  return (\n    <section className=\"space-y-4\">\n      <h1 className=\"text-2xl font-semibold\">Settings</h1>\n\n      <div className=\"rounded-2xl bg-white p-4 shadow\">\n        <div className=\"text-sm text-gray-600\">Signed in as {user?.email}</div>\n\n        <div className=\"mt-3 flex items-center gap-2\">\n          <input\n            type=\"checkbox\"\n            checked={notif}\n            onChange={(e) => setNotif(e.target.checked)}\n          />\n          <span>Enable reminders/notifications</span>\n        </div>\n\n        <div className=\"mt-3\">\n          <label className=\"mr-2 text-sm\">Default Difficulty</label>\n          <select\n            className=\"rounded border p-2\"\n            value={difficulty}\n            onChange={(e) => setDifficulty(e.target.value)}\n          >\n            <option>easy</option>\n            <option>medium</option>\n            <option>hard</option>\n          </select>\n        </div>\n\n        <div className=\"mt-4 flex gap-2\">\n          <button onClick={save} className=\"rounded bg-black px-4 py-2 text-white\">Save</button>\n          <button onClick={logout} className=\"rounded bg-red-600 px-4 py-2 text-white\">Log out</button>\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":2176},"studyit-app/next.config.ts":{"content":"import type { NextConfig } from \"next\";\n\nconst nextConfig: NextConfig = {\n  /* config options here */\n};\n\nexport default nextConfig;\n","size_bytes":133},"studyit-app/src/app/plan/page.tsx":{"content":"\"use client\";\n/**\n * Plan page: builds a simple study plan using saved preferences.\n *\n * Data\n * - Reads `studyit_prefs` and writes `studyit_plan` to localStorage.\n * - `PlanItem`: `{ topic, type, day }` where `type` is one of `review|flashcards|quiz`.\n *\n * Logic\n * - Deterministically converts first 3 subjects into a short two-day plan.\n */\n\nimport { useEffect, useState } from \"react\";\n\n/** User preferences driving the plan generator. */\ntype Pref = { subjects: string; goal: string; style: string; level: string };\n/** Single scheduled learning unit to display in the UI. */\ntype PlanItem = { topic: string; type: \"review\" | \"flashcards\" | \"quiz\"; day: number };\n\nconst PREF_KEY = \"studyit_prefs\";\nconst PLAN_KEY = \"studyit_plan\";\n\nexport default function Plan() {\n  const [plan, setPlan] = useState<PlanItem[]>([]);\n\n  /**\n   * Build a small plan from the provided preferences.\n   * @param p Preferences containing a comma-separated `subjects` list.\n   * @returns Array of `PlanItem`s spanning review, flashcards, and quiz.\n   */\n  function buildPlan(p: Pref): PlanItem[] {\n    const subjects = (p.subjects || \"General\")\n      .split(\",\")\n      .map((s) => s.trim())\n      .filter(Boolean);\n\n    const topics = subjects.slice(0, 3); // cap to 3 to keep UI readable\n    const out: PlanItem[] = [];\n    topics.forEach((t, i) => {\n      out.push({ topic: t, type: \"review\", day: i + 1 });\n      out.push({ topic: t, type: \"flashcards\", day: i + 1 });\n      out.push({ topic: t, type: \"quiz\", day: i + 2 });\n    });\n    return out;\n  }\n\n  // Hydrate on first render from either saved plan or prefs.\n  // Preference hydration occurs only when there is no existing plan.\n  useEffect(() => {\n    const rawPlan = localStorage.getItem(PLAN_KEY);\n    if (rawPlan) {\n      setPlan(JSON.parse(rawPlan));\n      return;\n    }\n    const rawPref = localStorage.getItem(PREF_KEY);\n    if (rawPref) {\n      const p = JSON.parse(rawPref) as Pref;\n      const built = buildPlan(p);\n      setPlan(built);\n      localStorage.setItem(PLAN_KEY, JSON.stringify(built));\n    }\n  }, []);\n\n  return (\n    <section>\n      <h1 className=\"mb-3 text-2xl font-semibold\">Study Plan</h1>\n\n      {plan.length === 0 && (\n        <p className=\"text-sm text-gray-600\">\n          No plan yet. Set your subjects in <a className=\"underline\" href=\"/preferences\">Preferences</a>.\n        </p>\n      )}\n\n      <ul className=\"space-y-2\">\n        {plan.map((it, idx) => (\n          <li key={idx} className=\"rounded-2xl bg-white p-3 shadow\">\n            <div className=\"text-sm text-gray-500\">Day {it.day}</div>\n            <div className=\"font-medium\">{it.topic}</div>\n            <div className=\"text-sm\">{it.type}</div>\n          </li>\n        ))}\n      </ul>\n    </section>\n  );\n}\n","size_bytes":2746},"studyit-app/src/app/dashboard/page.tsx":{"content":"\"use client\";\n/**\n * Dashboard: primary hub after login.\n *\n * Data\n * - Reads `studyit_stats` from localStorage: `{ streak, sessions, quizzes }`.\n *\n * UI\n * - KPI cards + quick links to core features.\n */\n\nimport { useAuth } from \"@/components/AuthProvider\";\nimport Link from \"next/link\";\nimport { useEffect, useState } from \"react\";\n\ntype Stats = { streak: number; sessions: number; quizzes: number };\nconst STATS_KEY = \"studyit_stats\";\n\nexport default function Dashboard() {\n  const { user } = useAuth();\n  const [stats, setStats] = useState<Stats>({ streak: 0, sessions: 0, quizzes: 0 });\n\n  // Hydrate stats from localStorage on first render\n  useEffect(() => {\n    const raw = localStorage.getItem(STATS_KEY);\n    if (raw) setStats(JSON.parse(raw));\n  }, []);\n\n  return (\n    <section className=\"space-y-4\">\n      <h1 className=\"text-2xl font-semibold\">Dashboard</h1>\n      <p className=\"text-sm text-gray-600\">Signed in as {user?.email}</p>\n\n      {/* KPI Cards */}\n      <div className=\"grid gap-3 md:grid-cols-3\">\n        <Card title=\"Streak\" val={stats.streak} />\n        <Card title=\"Study Sessions\" val={stats.sessions} />\n        <Card title=\"Quizzes Taken\" val={stats.quizzes} />\n      </div>\n\n      {/* Quick access navigation */}\n      <div className=\"grid gap-3 md:grid-cols-3\">\n        <QuickLink href=\"/preferences\" label=\"Subjects & Preferences\" />\n        <QuickLink href=\"/plan\" label=\"Create Plan\" />\n        <QuickLink href=\"/flashcards\" label=\"Flashcards\" />\n        <QuickLink href=\"/quiz\" label=\"New Quiz\" />\n        <QuickLink href=\"/tutor\" label=\"Ask AI Tutor\" />\n        <QuickLink href=\"/performance\" label=\"Performance\" />\n      </div>\n    </section>\n  );\n}\n\n/** Small UI helper for KPI tiles. */\nfunction Card({ title, val }: { title: string; val: number }) {\n  return (\n    <div className=\"rounded-2xl bg-white p-4 shadow\">\n      <div className=\"text-sm text-gray-500\">{title}</div>\n      <div className=\"mt-1 text-3xl font-semibold\">{val}</div>\n    </div>\n  );\n}\n\n/** Small UI helper for dash links. */\nfunction QuickLink({ href, label }: { href: string; label: string }) {\n  return (\n    <Link href={href} className=\"rounded-2xl bg-white p-4 shadow hover:bg-gray-50\">\n      {label}\n    </Link>\n  );\n}\n","size_bytes":2238},"studyit-app/src/app/page.tsx":{"content":"import Image from \"next/image\";\n\nexport default function Home() {\n  return (\n    <div className=\"font-sans grid grid-rows-[20px_1fr_20px] items-center justify-items-center min-h-screen p-8 pb-20 gap-16 sm:p-20\">\n      <main className=\"flex flex-col gap-[32px] row-start-2 items-center sm:items-start\">\n        <Image\n          className=\"dark:invert\"\n          src=\"/next.svg\"\n          alt=\"Next.js logo\"\n          width={180}\n          height={38}\n          priority\n        />\n        <ol className=\"font-mono list-inside list-decimal text-sm/6 text-center sm:text-left\">\n          <li className=\"mb-2 tracking-[-.01em]\">\n            Get started by editing{\" \"}\n            <code className=\"bg-black/[.05] dark:bg-white/[.06] font-mono font-semibold px-1 py-0.5 rounded\">\n              src/app/page.tsx\n            </code>\n            .\n          </li>\n          <li className=\"tracking-[-.01em]\">\n            Save and see your changes instantly.\n          </li>\n        </ol>\n\n        <div className=\"flex gap-4 items-center flex-col sm:flex-row\">\n          <a\n            className=\"rounded-full border border-solid border-transparent transition-colors flex items-center justify-center bg-foreground text-background gap-2 hover:bg-[#383838] dark:hover:bg-[#ccc] font-medium text-sm sm:text-base h-10 sm:h-12 px-4 sm:px-5 sm:w-auto\"\n            href=\"https://vercel.com/new?utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <Image\n              className=\"dark:invert\"\n              src=\"/vercel.svg\"\n              alt=\"Vercel logomark\"\n              width={20}\n              height={20}\n            />\n            Deploy now\n          </a>\n          <a\n            className=\"rounded-full border border-solid border-black/[.08] dark:border-white/[.145] transition-colors flex items-center justify-center hover:bg-[#f2f2f2] dark:hover:bg-[#1a1a1a] hover:border-transparent font-medium text-sm sm:text-base h-10 sm:h-12 px-4 sm:px-5 w-full sm:w-auto md:w-[158px]\"\n            href=\"https://nextjs.org/docs?utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Read our docs\n          </a>\n        </div>\n      </main>\n      <footer className=\"row-start-3 flex gap-[24px] flex-wrap items-center justify-center\">\n        <a\n          className=\"flex items-center gap-2 hover:underline hover:underline-offset-4\"\n          href=\"https://nextjs.org/learn?utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <Image\n            aria-hidden\n            src=\"/file.svg\"\n            alt=\"File icon\"\n            width={16}\n            height={16}\n          />\n          Learn\n        </a>\n        <a\n          className=\"flex items-center gap-2 hover:underline hover:underline-offset-4\"\n          href=\"https://vercel.com/templates?framework=next.js&utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <Image\n            aria-hidden\n            src=\"/window.svg\"\n            alt=\"Window icon\"\n            width={16}\n            height={16}\n          />\n          Examples\n        </a>\n        <a\n          className=\"flex items-center gap-2 hover:underline hover:underline-offset-4\"\n          href=\"https://nextjs.org?utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <Image\n            aria-hidden\n            src=\"/globe.svg\"\n            alt=\"Globe icon\"\n            width={16}\n            height={16}\n          />\n          Go to nextjs.org →\n        </a>\n      </footer>\n    </div>\n  );\n}\n","size_bytes":3990},"studyit-app/src/app/flashcards/page.tsx":{"content":"\"use client\";\n/**\n * Flashcards page: demo generator + session tracking.\n *\n * Data\n * - localStorage keys:\n *   - `studyit_cards`: `Card[]` where `Card = { q, a, due }`.\n *   - `studyit_stats`: `{ streak, sessions, quizzes }`.\n *\n * Behavior\n * - \"Generate\" creates 3 stub cards for the given topic and persists them.\n * - Each generation counts as a study session and increases streak.\n */\n\nimport { FormEvent, useEffect, useState } from \"react\";\n\n/** Representation of a flashcard. */\ntype Card = { q: string; a: string; due: string };\nconst CARDS_KEY = \"studyit_cards\";\nconst STATS_KEY = \"studyit_stats\";\n\nexport default function Flashcards() {\n  const [topic, setTopic] = useState(\"\");\n  const [cards, setCards] = useState<Card[]>([]);\n\n  // Load previously generated cards\n  useEffect(() => {\n    const raw = localStorage.getItem(CARDS_KEY);\n    if (raw) setCards(JSON.parse(raw));\n  }, []);\n\n  /**\n   * Create a small set of cards for the provided topic.\n   * @param t Topic to embed in generated Q/A text.\n   * @returns Three flashcards with the current timestamp as `due`.\n   */\n  function genCards(t: string): Card[] {\n    const base = t || \"General\";\n    return [1, 2, 3].map((i) => ({\n      q: `${base}: concept ${i}?`,\n      a: `Definition of ${base} concept ${i}.`,\n      due: new Date().toISOString(),\n    }));\n  }\n\n  /** Handle form submission to generate new cards. */\n  function onGenerate(e: FormEvent) {\n    e.preventDefault();\n    const newCards = genCards(topic);\n    const all = [...newCards, ...cards];\n    setCards(all);\n    localStorage.setItem(CARDS_KEY, JSON.stringify(all));\n    bumpSessions();\n  }\n\n  /** Update aggregate stats for dashboard/performance. */\n  function bumpSessions() {\n    const raw = localStorage.getItem(STATS_KEY);\n    const s = raw ? JSON.parse(raw) : { streak: 0, sessions: 0, quizzes: 0 };\n    s.sessions += 1;\n    s.streak = Math.min(s.streak + 1, 999);\n    localStorage.setItem(STATS_KEY, JSON.stringify(s));\n  }\n\n  return (\n    <section className=\"space-y-4\">\n      <h1 className=\"text-2xl font-semibold\">Flashcards</h1>\n\n      <form onSubmit={onGenerate} className=\"flex gap-2\">\n        <input\n          className=\"w-full rounded border p-2\"\n          placeholder=\"Topic (e.g., Linear Regression)\"\n          value={topic}\n          onChange={(e) => setTopic(e.target.value)}\n        />\n        <button className=\"rounded bg-black px-4 py-2 text-white\">Generate</button>\n      </form>\n\n      <ul className=\"grid gap-3 md:grid-cols-2\">\n        {cards.map((c, i) => (\n          <li key={i} className=\"rounded-2xl bg-white p-4 shadow\">\n            <div className=\"font-medium\">Q: {c.q}</div>\n            <div className=\"mt-2 text-sm text-gray-700\">A: {c.a}</div>\n          </li>\n        ))}\n      </ul>\n    </section>\n  );\n}\n","size_bytes":2778},"studyit-app/src/app/performance/page.tsx":{"content":"\"use client\";\n/**\n * Performance page: small analytics snapshot.\n * Data\n * - Reads \"studyit_stats\": { streak, sessions, quizzes }.\n * UI\n * - KPI tiles; charts can be added later.\n */\n\nimport { useEffect, useState } from \"react\";\nconst STATS_KEY = \"studyit_stats\";\n\ntype Stats = { streak: number; sessions: number; quizzes: number };\n\nexport default function Performance() {\n  const [stats, setStats] = useState<Stats>({ streak: 0, sessions: 0, quizzes: 0 });\n\n  // Hydrate from localStorage once on client\n  useEffect(() => {\n    const raw = localStorage.getItem(STATS_KEY);\n    if (raw) setStats(JSON.parse(raw));\n  }, []);\n\n  return (\n    <section className=\"space-y-4\">\n      <h1 className=\"text-2xl font-semibold\">Performance</h1>\n\n      <div className=\"grid gap-3 md:grid-cols-3\">\n        <Card label=\"Current Streak\" value={stats.streak} />\n        <Card label=\"Total Sessions\" value={stats.sessions} />\n        <Card label=\"Quizzes Completed\" value={stats.quizzes} />\n      </div>\n\n      <p className=\"text-sm text-gray-600\">\n        Future work: add trend charts and strengths/weaknesses by topic.\n      </p>\n    </section>\n  );\n}\n\nfunction Card({ label, value }: { label: string; value: number }) {\n  return (\n    <div className=\"rounded-2xl bg-white p-4 shadow\">\n      <div className=\"text-sm text-gray-500\">{label}</div>\n      <div className=\"mt-1 text-3xl font-semibold\">{value}</div>\n    </div>\n  );\n}\n","size_bytes":1417},"studyit-app/src/components/AuthProvider.tsx":{"content":"\"use client\";\n/**\n * Minimal AuthProvider with localStorage-backed session.\n *\n * Responsibilities\n * - Persist a simple `{ email }` user object in `localStorage` under key `studyit_user`.\n * - Expose `login` and `logout` actions to consumers via React context.\n * - Hydrate initial session state on first client render.\n *\n * Exports\n * - `AuthProvider`: React provider that supplies the auth context to children.\n * - `useAuth`: Hook to consume the auth context.\n */\n\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\n\n/** Represents the authenticated user payload stored in localStorage. */\ntype User = { email: string } | null;\n\n/** Contract for the authentication context. */\ntype Ctx = {\n  /** Current user, or `null` when signed out. */\n  user: User;\n  /** Sign in with an email; persists to localStorage and updates state. */\n  login: (email: string) => void;\n  /** Sign out; clears localStorage and navigates to `/login`. */\n  logout: () => void;\n};\n\nconst AuthCtx = createContext<Ctx>({\n  user: null,\n  login: () => {},\n  logout: () => {},\n});\n\n/**\n * Hook to access the authentication context.\n * @returns Current user and auth actions `login` and `logout`.\n */\nexport const useAuth = () => useContext(AuthCtx);\n\n/**\n * Provides authentication context to the subtree.\n * Handles client-only hydration from localStorage.\n */\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User>(null);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    const raw = localStorage.getItem(\"studyit_user\");\n    if (raw) setUser(JSON.parse(raw));\n  }, []);\n\n  /**\n   * Log in with the provided email.\n   * @param email Email address to persist as the current user.\n   */\n  const login = (email: string) => {\n    const u = { email };\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(\"studyit_user\", JSON.stringify(u));\n      setUser(u);\n    }\n  };\n\n  /**\n   * Log out and redirect to `/login`.\n   * Clears the persisted user from localStorage and state.\n   */\n  const logout = () => {\n    if (typeof window !== \"undefined\") {\n      localStorage.removeItem(\"studyit_user\");\n      setUser(null);\n      window.location.href = \"/login\";\n    }\n  };\n\n  return <AuthCtx.Provider value={{ user, login, logout }}>{children}</AuthCtx.Provider>;\n}\n","size_bytes":2357},"studyit-app/src/components/Protected.tsx":{"content":"\"use client\";\n/**\n * Protected route wrapper.\n *\n * Behavior\n * - Allows public routes `\"/\"` and `\"/login\"` without authentication.\n * - For any other route, if there is no authenticated user, redirects to `/login`.\n * - While redirecting, renders `null` to avoid flashing protected content.\n */\n\nimport React, { useEffect } from \"react\";\nimport { usePathname } from \"next/navigation\";\nimport { useAuth } from \"./AuthProvider\";\n\n/**\n * Guard component for authenticated sections of the app.\n * @param children Content to render when access is allowed.\n */\nexport function Protected({ children }: { children: React.ReactNode }) {\n  const { user } = useAuth();\n  const pathname = usePathname();\n  const publicRoutes = [\"/\", \"/login\"];\n\n  useEffect(() => {\n    if (!user && !publicRoutes.includes(pathname)) {\n      window.location.href = \"/login\";\n    }\n  }, [user, pathname]);\n\n  if (!user && !publicRoutes.includes(pathname)) return null;\n  return <>{children}</>;\n}\n","size_bytes":967},"studyit-app/src/app/layout.tsx":{"content":"/**\n * Root layout: provides global shell for the app.\n *\n * Responsibilities\n * - Inject global styles via `globals.css`.\n * - Render top navigation links across pages.\n * - Wrap pages with `AuthProvider` (session) and `Protected` (route guard).\n *\n * Notes\n * - All routes except `\"/\"` and `\"/login\"` are treated as private.\n * - Uses Tailwind CSS utilities for layout and styling.\n */\nimport type { Metadata } from \"next\";\nimport \"./globals.css\";\nimport Link from \"next/link\";\nimport { AuthProvider } from \"@/components/AuthProvider\";\nimport { Protected } from \"@/components/Protected\";\n\n\n\n/** Static site metadata for Next.js. */\nexport const metadata: Metadata = {\n  title: \"StudyIt\",\n  description: \"Personalized study planner\",\n};\n\n/**\n * Global app shell with navigation and route protection.\n * @param children Active route content.\n */\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <html lang=\"en\">\n      <body className=\"min-h-screen bg-gray-50 text-gray-900\">\n        {/* Provide auth context to the whole tree */}\n        <AuthProvider>\n          {/* Global top navigation; visible on all pages for quick access */}\n          <header className=\"border-b bg-white\">\n            <nav className=\"mx-auto flex max-w-6xl items-center justify-between p-3\">\n              <Link href=\"/dashboard\" className=\"text-xl font-semibold\">StudyIt</Link>\n              <div className=\"flex flex-wrap gap-3 text-sm\">\n                <Link href=\"/dashboard\">Dashboard</Link>\n                <Link href=\"/preferences\">Preferences</Link>\n                <Link href=\"/plan\">Plan</Link>\n                <Link href=\"/flashcards\">Flashcards</Link>\n                <Link href=\"/quiz\">Quiz</Link>\n                <Link href=\"/tutor\">AI Tutor</Link>\n                <Link href=\"/performance\">Performance</Link>\n                <Link href=\"/settings\">Settings</Link>\n              </div>\n            </nav>\n          </header>\n\n          {/* Route guard — blocks private pages when not logged in */}\n          <Protected>\n            <main className=\"mx-auto max-w-6xl p-4\">{children}</main>\n          </Protected>\n        </AuthProvider>\n      </body>\n    </html>\n  );\n}\n","size_bytes":2209},"studyit-app/src/app/login/page.tsx":{"content":"\"use client\";\n/**\n * Login page (public).\n *\n * UX\n * - Single-field email login for demo; no password.\n *\n * Flow\n * - On submit: persist email via `AuthProvider` → redirect `/dashboard`.\n */\n\nimport { useAuth } from \"@/components/AuthProvider\";\nimport { FormEvent, useState } from \"react\";\n\nexport default function LoginPage() {\n  const { user, login } = useAuth();\n  // Pre-fill input when user exists (useful if they navigated back)\n  const [email, setEmail] = useState(user?.email ?? \"\");\n\n  /** Submit handler to sign in with email and navigate to dashboard. */\n  function onSubmit(e: FormEvent) {\n    e.preventDefault();\n    if (!email.trim()) return; // simple guard\n    login(email.trim());\n    window.location.href = \"/dashboard\";\n  }\n\n  return (\n    <div className=\"mx-auto mt-10 max-w-md rounded-2xl bg-white p-6 shadow\">\n      <h1 className=\"text-xl font-semibold\">Login</h1>\n      <form onSubmit={onSubmit} className=\"mt-4 space-y-3\">\n        <input\n          className=\"w-full rounded border p-2\"\n          placeholder=\"you@example.com\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <button className=\"w-full rounded bg-black p-2 text-white\">Sign in</button>\n      </form>\n    </div>\n  );\n}\n","size_bytes":1258},"studyit-app/src/app/quiz/page.tsx":{"content":"\"use client\";\n/**\n * Quiz page: create → take → submit → see results.\n *\n * Data\n * - Aggregates `studyit_stats.quizzes` on submit.\n * - Quiz items are generated locally for demo (no server).\n *\n * UX\n * - Build a 3-question quiz for a topic and difficulty.\n * - Show score after submission.\n */\n\nimport { FormEvent, useEffect, useState } from \"react\";\n\ntype Q = { q: string; options: string[]; answer: number };\nconst STATS_KEY = \"studyit_stats\";\n\n/** Deterministic quiz factory; replace with real item bank later. */\nfunction buildQuiz(topic: string, level: string): Q[] {\n  const base = topic || \"General\";\n  const diff = level || \"medium\";\n  const opts = [\"A\", \"B\", \"C\", \"D\"];\n  return [1, 2, 3].map((i) => ({\n    q: `${base} (${diff}) — question ${i}?`,\n    options: opts.map((o) => `${base} option ${o}${i}`),\n    answer: i % 4, // rotate correct index to avoid trivial patterns\n  }));\n}\n\nexport default function Quiz() {\n  const [topic, setTopic] = useState(\"\");\n  const [level, setLevel] = useState(\"medium\");\n  const [quiz, setQuiz] = useState<Q[] | null>(null);\n  const [answers, setAnswers] = useState<number[]>([]);\n  const [score, setScore] = useState<number | null>(null);\n\n  // Reset answers when a new quiz is created\n  useEffect(() => setAnswers(quiz ? Array(quiz.length).fill(-1) : []), [quiz]);\n\n  /** Build quiz from form inputs. */\n  function onCreate(e: FormEvent) {\n    e.preventDefault();\n    const q = buildQuiz(topic, level);\n    setQuiz(q);\n    setScore(null);\n  }\n\n  /** Score answers and update aggregate quiz count. */\n  function onSubmit(e: FormEvent) {\n    e.preventDefault();\n    if (!quiz) return;\n    const s = quiz.reduce((acc, q, i) => acc + (answers[i] === q.answer ? 1 : 0), 0);\n    setScore(s);\n    bumpQuizzes();\n  }\n\n  /** Increment quiz counter (consumed by Dashboard/Performance). */\n  function bumpQuizzes() {\n    const raw = localStorage.getItem(STATS_KEY);\n    const st = raw ? JSON.parse(raw) : { streak: 0, sessions: 0, quizzes: 0 };\n    st.quizzes += 1;\n    localStorage.setItem(STATS_KEY, JSON.stringify(st));\n  }\n\n  return (\n    <section className=\"space-y-4\">\n      <h1 className=\"text-2xl font-semibold\">Quiz</h1>\n\n      {/* Quiz builder */}\n      <form onSubmit={onCreate} className=\"flex gap-2\">\n        <input\n          className=\"w-full rounded border p-2\"\n          placeholder=\"Topic\"\n          value={topic}\n          onChange={(e) => setTopic(e.target.value)}\n        />\n        <select className=\"rounded border p-2\" value={level} onChange={(e) => setLevel(e.target.value)}>\n          <option value=\"easy\">Easy</option>\n          <option value=\"medium\">Medium</option>\n          <option value=\"hard\">Hard</option>\n        </select>\n        <button className=\"rounded bg-black px-4 py-2 text-white\">Create</button>\n      </form>\n\n      {/* Quiz taker */}\n      {quiz && (\n        <form onSubmit={onSubmit} className=\"space-y-4\">\n          {quiz.map((q, i) => (\n            <div key={i} className=\"rounded-2xl bg-white p-4 shadow\">\n              <div className=\"font-medium\">{q.q}</div>\n              <div className=\"mt-2 grid gap-2 md:grid-cols-2\">\n                {q.options.map((op, idx) => (\n                  <label key={idx} className=\"flex items-center gap-2 text-sm\">\n                    <input\n                      type=\"radio\"\n                      name={`q${i}`}\n                      checked={answers[i] === idx}\n                      onChange={() => {\n                        const copy = [...answers];\n                        copy[i] = idx;\n                        setAnswers(copy);\n                      }}\n                    />\n                    {op}\n                  </label>\n                ))}\n              </div>\n            </div>\n          ))}\n          <button className=\"rounded bg-green-600 px-4 py-2 text-white\">Submit</button>\n        </form>\n      )}\n\n      {/* Results */}\n      {score !== null && quiz && (\n        <div className=\"rounded-2xl bg-white p-4 shadow\">\n          <div className=\"text-lg font-semibold\">Results</div>\n          <div className=\"mt-1\">Score: {score} / {quiz.length}</div>\n        </div>\n      )}\n    </section>\n  );\n}\n","size_bytes":4148},"studyit-app/src/lib/auth.ts":{"content":"","size_bytes":0},"studyit-app/README.md":{"content":"This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).\n\n## Getting Started\n\nFirst, run the development server:\n\n```bash\nnpm run dev\n# or\nyarn dev\n# or\npnpm dev\n# or\nbun dev\n```\n\nOpen [http://localhost:3000](http://localhost:3000) with your browser to see the result.\n\nYou can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.\n\nThis project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.\n\n## Learn More\n\nTo learn more about Next.js, take a look at the following resources:\n\n- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.\n- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.\n\nYou can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!\n\n## Deploy on Vercel\n\nThe easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.\n\nCheck out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.\n","size_bytes":1450}},"version":2}